# ========================================
# CONFIGURACIÓN DE NOTION API
# ========================================

# Token de integración de Notion (requerido)
NOTION_TOKEN=[añadir_en_entorno_seguro_o_secrets_manager]

# ID de la base de datos de proyectos (requerido)
NOTION_PROJECTS_DB_ID=[pegar_id_de_BD_Proyectos]

# Nombres de las bases de datos (requeridos)
MATRIZ_DB_NAME=Matriz de pruebas
INCIDENCIAS_DB_NAME=Reporte de incidencias

# ========================================
# CONFIGURACIÓN DE REPORTES
# ========================================

# Directorios de salida (opcional)
SNAPSHOT_DIR=./snapshots
REPORT_OUT_DIR=./reports

# AWS (opcional, solo si se usa S3)
AWS_REGION=us-east-1
AWS_SECRETS_NAME=[opcional/si-usas-secrets-manager]
AWS_S3_BUCKET=[opcional]
AWS_S3_KMS_KEY_ID=[opcional]

# ========================================
# CONFIGURACIÓN DE NOTION API (opcional)
# ========================================

# Versión de la API
NOTION_API_VERSION=2022-06-28

# Límites y reintentos
RATE_LIMIT_RPM=60
MAX_RETRIES=3
BASE_RETRY_DELAY_MS=1000
MAX_RETRY_DELAY_MS=30000
TIMEOUT_MS=30000

# ========================================
# CONFIGURACIÓN DE LOGGING (opcional)
# ========================================

LOG_LEVEL=info
MAX_ID_DISPLAY_LENGTH=8
ENABLE_DEBUG=false
ENABLE_VERBOSE=false

# ========================================
# CONFIGURACIÓN DE EMAIL
# ========================================

# Habilitar envío de emails (true/false)
EMAIL_ENABLED=false

# Configuración SMTP
EMAIL_SMTP_HOST=smtp.gmail.com
EMAIL_SMTP_PORT=587
EMAIL_SMTP_SECURE=false

# Credenciales SMTP (requeridas si EMAIL_ENABLED=true)
EMAIL_USER=tu-email@ejemplo.com
EMAIL_PASSWORD=tu-password-o-app-password

# Remitente
EMAIL_FROM=reportes-qa@ejemplo.com

# ========================================
# DESTINATARIOS
# ========================================
# IMPORTANTE: Separar emails por comas sin espacios
# Ejemplo: email1@ejemplo.com,email2@ejemplo.com,email3@ejemplo.com

# Destinatarios para reporte diario (requerido si EMAIL_ENABLED=true)
EMAIL_RECIPIENTS_DAILY=destinatario1@ejemplo.com,destinatario2@ejemplo.com

# Destinatarios para reporte semanal (requerido si EMAIL_ENABLED=true)
EMAIL_RECIPIENTS_WEEKLY=gerente@ejemplo.com,jefe@ejemplo.com

# ========================================
# PERSONALIZACIÓN DE CORREOS
# ========================================

# Asuntos de los correos
EMAIL_SUBJECT_DAILY=Reporte diario de avances QA
EMAIL_SUBJECT_WEEKLY=Reporte semanal de avances QA

# Textos introductorios
EMAIL_INTRO_DAILY=Saludos cordiales, por este medio se les presenta el avance diario de los casos de pruebas e incidencias de los siguientes proyectos:
EMAIL_INTRO_WEEKLY=Saludos cordiales, por este medio se les presenta el avance semanal de los casos de pruebas e incidencias de los siguientes proyectos:

# ========================================
# CONFIGURACIÓN DE REINTENTOS
# ========================================

# Número máximo de reintentos al enviar email
EMAIL_MAX_RETRIES=3

# Delay inicial entre reintentos (en ms)
EMAIL_RETRY_DELAY_MS=1000

# Multiplicador para backoff exponencial
EMAIL_RETRY_BACKOFF=2

# ========================================
# CONFIGURACIÓN DEL SCHEDULER AUTOMÁTICO
# ========================================

# Habilitar scheduler automático (true/false)
EMAIL_SCHEDULER_ENABLED=false

# Horario de envío diario (formato HH:MM en 24 horas)
# Por defecto: 16:00 (4:00 PM)
EMAIL_SCHEDULER_DAILY_TIME=16:00

# Día de envío semanal (0=Domingo, 1=Lunes, 2=Martes, etc.)
# Por defecto: 1 (Lunes)
EMAIL_SCHEDULER_WEEKLY_DAY=1

# Horario de envío semanal (formato HH:MM en 24 horas)
# Por defecto: 09:00 (9:00 AM)
EMAIL_SCHEDULER_WEEKLY_TIME=09:00

# Timezone para el scheduler
# Por defecto: America/Asuncion
EMAIL_SCHEDULER_TIMEZONE=America/Asuncion

# ========================================
# NOTAS IMPORTANTES
# ========================================
#
# 1. Para Gmail, necesitas usar una "App Password" en lugar de tu
#    contraseña normal. Genera una en:
#    https://myaccount.google.com/apppasswords
#
# 2. El scheduler se ejecuta:
#    - Diario: Lunes a Viernes a las 16:00
#    - Semanal: Lunes a las 09:00
#
# 3. Para probar la conexión SMTP sin enviar emails:
#    npm run test:email-connection
#
# 4. Para enviar un email manualmente:
#    npm run send:daily-email
#    npm run send:weekly-email
#
# 5. Para iniciar el scheduler:
#    npm run start:scheduler
#
# 6. Los logs de email se guardan en: logs/email-YYYY-MM-DD.log
#